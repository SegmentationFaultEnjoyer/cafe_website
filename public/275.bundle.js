(self.webpackChunktsikava=self.webpackChunktsikava||[]).push([[275],{2457:(t,e,a)=>{const n=a(8595),i=a(5912);t.exports=class extends n{constructor(t){super(t)}render(){return this.modal_wrapper(React.createElement(React.Fragment,null,React.createElement("button",{className:"round-button",onClick:this.change_state},React.createElement("i",{className:"fa fa-plus",style:{padding:"5px",fontSize:"45px"}}))),React.createElement(React.Fragment,null,React.createElement(i,{isEmpty:!0})))}}},5912:(t,e,a)=>{const n=a(8813),i=a(2167),s=a(1744),r=a(563);class o extends React.Component{constructor(t){super(t),this.counter=0,this.product_info=t.isEmpty?null:t.info,this.state={extras:this.init_extras(),options:this.init_options(),isWaitingForConfirmation:!1,ConfirmCallback:null},this.addField=this.addField.bind(this),this.SubmitHandler=this.SubmitHandler.bind(this),this.extras=React.createRef(),this.options=React.createRef()}init_options(){return this.props.isEmpty||!this.product_info.options&&!this.product_info.optionsPlural?[]:(this.product_info.options?this.product_info.options[0].contains:this.product_info.optionsPlural.contains).map((t=>{let e=this.counter++;return React.createElement("div",{className:"flex-container",key:e},React.createElement("input",{type:"text",defaultValue:t}),React.createElement("i",{className:"fa fa-trash",onClick:()=>this.removeField("option",e)}))}))}init_extras(){return this.props.isEmpty||!this.product_info.extras?[]:this.product_info.extras.map((t=>{let e=this.counter++;return React.createElement("div",{className:"flex-container",key:e},React.createElement("input",{type:"text",defaultValue:t.name}),React.createElement("input",{type:"text",defaultValue:t.price}),React.createElement("i",{className:"fa fa-trash",onClick:()=>this.removeField("extra",e)}))}))}removeField(t,e){if("extra"==t){let t=this.state.extras.filter((t=>Number(t.key)!==e));this.setState({extras:t})}else{let t=this.state.options.filter((t=>Number(t.key)!==e));this.setState({options:t})}}addField(t){if("extra"==t){let t=[...this.state.extras],e=this.counter++;t.push(React.createElement("div",{className:"flex-container",key:e},React.createElement("input",{type:"text",placeholder:"Назва додатку"}),React.createElement("input",{type:"text",placeholder:"Ціна додатку"}),React.createElement("i",{className:"fa fa-trash",onClick:()=>this.removeField("extra",e)}))),this.setState({extras:t})}else{let t=[...this.state.options],e=this.counter++;t.push(React.createElement("div",{className:"flex-container",key:e},React.createElement("input",{type:"text",placeholder:"Варіант"}),React.createElement("i",{className:"fa fa-trash",onClick:()=>this.removeField("option",e)}))),this.setState({options:t})}}parseExtras(){let t=[];return this.extras.current.querySelectorAll("div").forEach((e=>{let[a,n]=e.querySelectorAll("input");""!=a.value.trim()&&""!=n.value.trim()&&t.push({name:a.value.trim(),price:parseInt(n.value)})})),t.length>0?t:null}parseOptions(t){let e=[];return this.options.current.querySelectorAll("div").forEach((t=>{let[a]=t.querySelectorAll("input");""!=a.value.trim()&&e.push(a.value.trim())})),e.length>0?[{name:t,contains:e}]:null}ValidateInput({name:t,desc:e,price:a,img:n}){return!(""==t||""==e||isNaN(a)||this.props.isEmpty&&""==n)}async SubmitHandler(t){t.preventDefault();let e=!0;const a=new FormData(t.target);console.log(this.product_info);let n={name:a.get("name").trim(),desc:a.get("desc").trim(),img:a.get("img").name,isPopular:!!a.get("isPopular"),price:parseInt(a.get("price")),type:parseInt(a.get("category")),extras:this.parseExtras(),options:this.parseOptions(a.get("options_name"))};if(this.product_info&&(n._id=this.product_info._id,""==n.img&&(n.img=this.product_info.img,e=!1),this.product_info.optionsPlural&&(n.optionsPlural={...n.options[0]},n.optionsPlural.amount=this.product_info.optionsPlural.amount,n.options=null)),console.log(n),this.ValidateInput(n)){let t;this.setState({isWaitingForConfirmation:!0,ConfirmCallback:async()=>{e&&(console.log(n.img,"ITS OK UPLOADING"),await fetch("upload_photo",{method:"POST",body:a}),n.img=n.img.split(".")[0]+".webp"),t=this.props.isEmpty?await s("/api/items","POST",n):await s("/api/items","PUT",n),console.log(t,n),t.success&&window.location.reload()}})}else alert("Введені некоректні данні! Перевірте поля ще раз.")}render(){let t=[n.SANDWHICH,n.SALAD,n.BREAKFAST,n.BOUL,n.DRINKS,n.DESSERTS,n.COFFEE];return React.createElement(React.Fragment,null,React.createElement("form",{className:"edit-form",onSubmit:this.SubmitHandler,encType:"multipart/form-data"},React.createElement("h3",null,"Назва"),React.createElement("input",{type:"text",name:"name",defaultValue:this.product_info?this.product_info.name:""}),React.createElement("h3",null,"Опис"),React.createElement("textarea",{name:"desc",defaultValue:this.product_info?this.product_info.desc:"",cols:"40",rows:"7"}),React.createElement("h3",null,"Фото"),React.createElement("input",{type:"file",name:"img"}),React.createElement("h3",null,"Категорія"),React.createElement("div",{className:"flex-container"},React.createElement("select",{name:"category"},!this.props.isEmpty&&React.createElement("option",{value:this.product_info.type},i(this.product_info.type)),t.filter((t=>t!==(this.product_info?this.product_info.type:null))).map((t=>React.createElement("option",{value:t},i(t))))),React.createElement("div",null,React.createElement("label",{htmlFor:"popular",style:{paddingRight:"5px"}},"На головну сторінку"),this.product_info&&this.product_info.hasOwnProperty("isPopular")&&this.product_info.isPopular?React.createElement("input",{type:"checkbox",defaultChecked:!0,name:"isPopular"}):React.createElement("input",{type:"checkbox",name:"isPopular"}))),React.createElement("h3",null,"Ціна"),React.createElement("input",{type:"text",name:"price",defaultValue:this.product_info?this.product_info.price:""}),React.createElement("div",{className:"flex-container"},React.createElement("h3",null,"Додатки"),React.createElement("i",{className:"fa fa-plus-circle",onClick:()=>{this.addField("extra")},style:{fontSize:"30px"}})),React.createElement("div",{name:"extras",ref:this.extras},this.state.extras.length>0&&this.state.extras),React.createElement("div",{className:"flex-container"},React.createElement("input",{type:"text",name:"options_name",style:{fontWeight:"bold"},defaultValue:this.product_info&&(this.product_info.options||this.product_info.optionsPlural)?this.product_info.options?this.product_info.options[0].name:this.product_info.optionsPlural.name:"Назва опції"}),React.createElement("i",{className:"fa fa-plus-circle",onClick:()=>{this.addField("option")},style:{fontSize:"30px"}})),React.createElement("div",{name:"options",ref:this.options},this.state.options.length>0&&this.state.options),React.createElement("button",{className:"green checkout-btn"},this.props.isEmpty?"ДОДАТИ":"ЗБЕРЕГТИ ЗМІНИ")),React.createElement(r,{isOpen:this.state.isWaitingForConfirmation,setIsOpen:t=>{this.setState({isWaitingForConfirmation:t})},afterConfirmCallback:this.state.ConfirmCallback,contains:"Ви впевнені?"}))}}t.exports=o},1158:(t,e,a)=>{const{useSelector:n}=a(83),i=a(2591),s=a(2167);t.exports=function(){const t=n((t=>t.grid.items));return React.createElement(React.Fragment,null,React.createElement("h1",{className:"grid-title disable-select"},s(t.category)),React.createElement("div",{className:"main-grid"},t.products.map((t=>React.createElement(i,{info:t,key:t._id})))))}},2591:(t,e,a)=>{const n=a(8595),i=a(563),s=a(5912),r=a(1744),{useState:o}=a(9526),{useDispatch:l}=a(83),{deleteItem:c}=a(7099);function p(t){let{info:e,onClick:a}=t;const n=l();let[s,p]=o({isOpen:!1,confirmCallback:null});return React.createElement("div",{className:"flex-container column preview disable-select"},React.createElement("div",{className:"flex-container edit-buttons"},React.createElement("i",{className:"fa fa-pencil",onClick:a}),React.createElement("i",{className:"fa fa-ban",onClick:async function(){console.log("УДОЛЯЮ"),p({isOpen:!0,confirmCallback:async()=>{let{success:t}=await r("/api/items","DELETE",{_id:e._id,img:e.img});t&&n(c(e._id)),console.log(t)}})}})),React.createElement("img",{className:"picture disable-pick",src:e.img,alt:e.img,onError:t=>{t.target.src="not_found.webp"}}),React.createElement("div",{className:"title-container"},React.createElement("h3",null,e.name)),React.createElement("p",{className:"price-label"},`${e.price} грн`),React.createElement(i,{isOpen:s.isOpen,setIsOpen:t=>{p({...s,isOpen:t})},afterConfirmCallback:s.confirmCallback,contains:`Хочете видалити ${e.name} назавжди?`}))}t.exports=class extends n{constructor(t){super(t),this.product_info=t.info}render(){return this.modal_wrapper(React.createElement(p,{info:this.product_info,onClick:this.change_state}),React.createElement(s,{info:this.product_info,isEmpty:!1}))}}},3275:(t,e,a)=>{const n=a(9526),i=a(553),s=a(2477),r=a(2267),o=a(1744);class l extends n.Component{constructor(t){super(t),this.state={isLoading:!0,isAuth:void 0}}async componentDidMount(){let t=await o("/auth");this.setState({isAuth:t.isAuth,isLoading:!1})}render(){return this.state.isLoading?n.createElement(r,null):n.createElement(n.Fragment,null,this.state.isAuth?n.createElement(s,null):n.createElement(i,{auth:()=>this.setState({isAuth:!0})}))}}t.exports=l},553:(t,e,a)=>{a(7298);const n=a(1744);class i extends React.Component{constructor(t){super(t),this.state={login:"",password:"",_loginInput:this.loginInput,_passwordInput:this.passwordInput},this.handleSubmit=this.handleSubmit.bind(this)}async handleSubmit(t){t.preventDefault();const e=new FormData(t.target);let a={login:e.get("login"),password:e.get("password")};if(""==a.login||""==a.password)return;console.log(a);let{isAuth:i}=await n("/login","POST",a);i?this.props.auth():alert("Невірний логін чи пароль!")}loginInput=[React.createElement("input",{className:"input",type:"text",name:"login",placeholder:" ",onFocus:this.CleanErrors}),React.createElement("div",{className:"cut cut-short"}),React.createElement("label",{htmlFor:"name",className:"placeholder"},"Логін")];passwordInput=[React.createElement("input",{className:"input",type:"password",name:"password",placeholder:" ",onFocus:this.CleanErrors}),React.createElement("div",{className:"cut"}),React.createElement("label",{htmlFor:"phoneNumber",className:"placeholder"},"Пароль")];render(){return React.createElement("div",{className:"flex-container column auth-container"},React.createElement("h1",{className:"title"},"Панель адміністратора"),React.createElement("form",{onSubmit:this.handleSubmit,className:"form"},React.createElement("div",{className:"input-container"},this.state._loginInput),React.createElement("div",{className:"input-container"},this.state._passwordInput),React.createElement("div",{className:"input-container"},React.createElement("button",{type:"submit",className:"brown checkout-btn"},"Увійти"))))}}t.exports=i},2477:(t,e,a)=>{a(8207);const{connect:n}=a(83),{initItems:i}=a(7099),s=a(1744),r=a(2267),o=a(6359),l=a(9846),c=a(1158),p=a(2457),m=a(6598);class u extends React.Component{constructor(t){super(t),this.state={isLoading:!0}}async componentDidMount(){let{products:t}=await s("/api/items");this.props.dispatch(i(t)),this.setState({isLoading:!1})}render(){return React.createElement(React.Fragment,null,this.state.isLoading?React.createElement(r,null):React.createElement(React.Fragment,null,React.createElement(o,null),React.createElement(l,null),React.createElement(c,null),React.createElement(p,null),React.createElement(m,null)))}}t.exports=n()(u)},6598:(t,e,a)=>{const n=a(8595),i=a(1744),s=a(563);t.exports=class extends n{constructor(t){super(t),this.state={isLoading:!0,photos:[],isWaitingForConfirmation:!1,ConfirmCallback:null,photoInputs:[]},this.addInput=this.addInput.bind(this),this.submitHandler=this.submitHandler.bind(this)}async componentDidMount(){let t=await i("/api/photos");this.setState({isLoading:!1,photos:t})}async deletePicture(t){this.setState({isWaitingForConfirmation:!0,ConfirmCallback:async()=>{let{success:e}=await i("/api/photos","DELETE",{photo:t});e&&(this.setState({photos:this.state.photos.filter((e=>e!==t))}),console.log("DELETED",t))}})}validateForm(t){for(let e of t)if(""==e.name)return!1;return!0}async submitHandler(t){t.preventDefault();const e=new FormData(t.target),a=e.getAll("img");if(!this.validateForm(a))return void alert("Залишилось пусте поле для загрузки фото!");this.setState({isLoading:!0});let n=await fetch("upload_photos",{method:"POST",body:e}),{isUploaded:s}=await n.json();if(s){await i("/api/photos","POST",{photos:a.map((t=>t.name.split(".")[0]+".webp"))});let t=[...this.state.photos];for(let e of a)t.push("location/"+e.name.split(".")[0]+".webp");setTimeout((()=>{this.setState({isLoading:!1,photos:t,photoInputs:[]})}),300)}}addInput(){let t=[...this.state.photoInputs];t.push(React.createElement("input",{type:"file",name:"img",style:{marginBottom:"20px"},multiple:!0})),this.setState({photoInputs:t})}render(){return this.modal_wrapper(React.createElement("button",{className:"round-button",onClick:this.change_state,style:{right:"15%",top:"19.5%"}},React.createElement("i",{className:"fa fa-picture-o",style:{padding:"10px",fontSize:"35px",paddingTop:"16px",paddingBottom:"15px"}})),React.createElement(React.Fragment,null,this.state.isLoading?React.createElement("div",{className:"flex-container"},React.createElement("i",{className:"fa fa-spinner fa-pulse fa-3x fa-fw",style:{fontSize:"30px"}}),React.createElement("span",{className:"sr-only"},"Loading...")):React.createElement(React.Fragment,null,this.state.photos.map((t=>React.createElement(React.Fragment,null,React.createElement("div",{className:"flex-container",key:t},React.createElement("img",{src:t,alt:t,className:"picture",style:{maxWidth:"90%",marginBottom:"10px"}}),React.createElement("i",{className:"fa fa-trash",onClick:()=>this.deletePicture(t),style:{fontSize:"25px",marginLeft:"15px"}}))))),React.createElement("form",{onSubmit:this.submitHandler,encType:"multipart/form-data"},React.createElement("div",{className:"flex-container"},React.createElement("i",{className:"fa fa-plus-circle",onClick:this.addInput,style:{fontSize:"40px"}})),React.createElement("div",{className:"flex-container column"},this.state.photoInputs),this.state.photoInputs.length>0&&React.createElement("button",{className:"green checkout-btn"},"ЗАГРУЗИТИ ФОТОГРАФІЇ")),React.createElement(s,{isOpen:this.state.isWaitingForConfirmation,setIsOpen:t=>{this.setState({isWaitingForConfirmation:t})},afterConfirmCallback:this.state.ConfirmCallback,contains:"Видалити фотографію?"}))))}}},563:(t,e,a)=>{const{Button:n,Icon:i,Modal:s}=a(5255);var r;(r=document.createElement("link")).rel="stylesheet",r.type="text/css",document.body.appendChild(r),r.href="https://cdn.jsdelivr.net/npm/semantic-ui@2/dist/semantic.min.css",t.exports=function({isOpen:t,setIsOpen:e,afterConfirmCallback:a,contains:r}){return React.createElement(s,{open:t,size:"mini",style:{height:"130px",marginLeft:"35%",marginTop:"20%"}},React.createElement(s.Content,null,React.createElement("p",null,r)),React.createElement(s.Actions,null,React.createElement(n,{color:"red",onClick:()=>e(!1)},React.createElement(i,{name:"remove"})," Ні"),React.createElement(n,{color:"green",onClick:function(){a(),e(!1)}},React.createElement(i,{name:"checkmark"})," Так")))}},410:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var n=a(5402),i=a.n(n),s=a(352),r=a.n(s)()(i());r.push([t.id,".edit-buttons {\r\n    margin-block-start: 0;\r\n    justify-content: space-between;\r\n    width: 260px;\r\n    position: absolute;\r\n    background-color: rgb(217, 217, 217);\r\n    border-radius: 10px 10px 0 0;\r\n    height: 40px;\r\n}\r\n\r\n.edit-buttons i {\r\n    color: rgb(35, 81, 35);\r\n    font-size: 30px;\r\n    padding-left: 9px;\r\n    padding-right: 9px;\r\n}\r\n\r\n.edit-buttons i:hover {\r\n    cursor: pointer;\r\n    color: rgb(68, 116, 68);\r\n}\r\n\r\n.edit-form {\r\n    margin-top: 20px;\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    flex-direction: column;\r\n}\r\n\r\n.edit-form input[type=text] {\r\n    all: unset;\r\n    font-size: 20px;\r\n    margin-bottom: 10px;\r\n    padding: 5px;\r\n    width: auto;\r\n    max-width: 40%;\r\n    border-bottom: 2px solid rgb(35, 81, 35);\r\n}\r\n\r\n.edit-form textarea {\r\n    all: unset;\r\n    font-size: 15px;\r\n    margin-bottom: 10px;\r\n    padding: 5px;\r\n    border: 2px solid rgb(35, 81, 35);\r\n}\r\n\r\n.edit-form select {\r\n    width: 200px;\r\n}",""]);const o=r},4504:(t,e,a)=>{"use strict";a.d(e,{Z:()=>o});var n=a(5402),i=a.n(n),s=a(352),r=a.n(s)()(i());r.push([t.id,".auth-container {\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n    width: 400px;\r\n    background-color: whitesmoke;\r\n    border-radius: 10px;\r\n    padding: 30px;\r\n    transform: translateY(25%);\r\n}\r\n\r\n.auth-container form {\r\n    height: auto;\r\n}",""]);const o=r},8207:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>g});var n=a(5701),i=a.n(n),s=a(8236),r=a.n(s),o=a(6080),l=a.n(o),c=a(6850),p=a.n(c),m=a(7182),u=a.n(m),d=a(9213),h=a.n(d),f=a(410),E={};E.styleTagTransform=h(),E.setAttributes=p(),E.insert=l().bind(null,"head"),E.domAPI=r(),E.insertStyleElement=u(),i()(f.Z,E);const g=f.Z&&f.Z.locals?f.Z.locals:void 0},7298:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>g});var n=a(5701),i=a.n(n),s=a(8236),r=a.n(s),o=a(6080),l=a.n(o),c=a(6850),p=a.n(c),m=a(7182),u=a.n(m),d=a(9213),h=a.n(d),f=a(4504),E={};E.styleTagTransform=h(),E.setAttributes=p(),E.insert=l().bind(null,"head"),E.domAPI=r(),E.insertStyleElement=u(),i()(f.Z,E);const g=f.Z&&f.Z.locals?f.Z.locals:void 0}}]);